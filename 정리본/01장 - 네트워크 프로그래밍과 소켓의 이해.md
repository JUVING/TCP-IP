
# *헤더파일*
![[Pasted image 20231201010746.png]]


#  *1-1*
소켓 : 네트워크(인터넷)의 연결 도구

운영체제에서 소켓이라는 개발된 모듈을 제공한다 소켓과 소켓은 연결이 가능하고 데이터를 주고 받는다.

 

받는 소켓 생성하기
*소켓 생성(socket) -> 소켓 주소 할당(bind) -> 소켓 연결(listen) -> 연결 요청 수락(accept)*

소켓 생성
![[Pasted image 20231201002114.png]]


소켓 주소 할당
![[Pasted image 20231201002151.png]]
소켓의 주소 할당 및 연결
소켓의 주소정보는 IP와 PORT번호로 구성된다.


소켓 연결
![[Pasted image 20231201002310.png]]
소켓에 할당된 IP와 PORT번호로 연결요청이 가능한 상태가 된다.
리스닝 소켓이라고 불리면 서버 소켓이라고도 불린다.
*전화기로 비유하면 개통 단계이다.*


소켓 연결 요청 수락
![[Pasted image 20231201002733.png]]
accept 함수호출 이후에는 데이터의 송수신이 가능하다 단 연결요청이 있으 때에만 accept함수가 반환을 한다. 수락된 이후에 데이터의 송수신은 양방향으로 가능하다.
*전화기로 비유하면 전화가 걸려와 수화기를 들어올린 단계이다.*


서버(server) : 연결요청을 허용하는 프로그램을 가리킨다.

| 단계  | 행동                     | 함수             |
| ----- | ------------------------ | ---------------- |
| 1단계 | 소켓의 생성              | socket 함수 호출 |
| 2단계 | IP와 PORT번호의 할당     | bind 함수 호출   |
| 3단계 | 연결요청 가능상태로 변경 | listen 함수 호출 |
| 4단계 | 연결 요청에 대한 수락    | accept 함수 호출                 |

전송하는 소켓 생성하기
자동화가 되어 있다.


연결을 요청
![[Pasted image 20231201010301.png]]


윈도우 기반으로 구현
# *1-2*

*리눅스* 기반 파일 조작하기
운영체제에서 제공한 함수를 주로 사용한다.


![[Pasted image 20231202222218.png]]

저 수준 파일 입출력
1.  ANSI의 표준 함수가 아닌, 운영체제가 제공하는 함수 기반의 파일 입출력
2.  표준이 아니기 때문에 *운영체제에 대한 호환성이 없다.
3.  리눅스는 *소켓도 파일*로 간주하기 때문에 저 수준 파일 입출력 함수를 기반으로 소켓 기반의 데이터 송수신이 가능하다.

![[Pasted image 20231202020858.png]]
0 : 키보드  1 : 모니터

파일 디스크립터 
1. 운영체제가 만든 파일을 구분하기 위한 일종의 숫자
2. 저 수준 파일 입출력 함수는 입출력을 목적으로 파일 디스크립터를 요구한다.
3. 저 수준 파일 입출력 함수에게 소켓의 파일 디스크립터를 전달하면, 소켓을 대상으로 입출력을 진행한다.


파일 열기
![[Pasted image 20231202021148.png]]

파일 닫기
![[Pasted image 20231202021204.png]]

파일에 데이터 쓰기
![[Pasted image 20231202021252.png]]
![[Pasted image 20231202021317.png]]

데이터 읽기
![[Pasted image 20231202021532.png]]
![[Pasted image 20231202021548.png]]

# *1-3*

윈도우 기반으로 구현하기

![[Pasted image 20231202222206.png]]

![[Pasted image 20231202023451.png]]
![[Pasted image 20231202023512.png]]


# *1-4

윈도우 기반의 함수와 예제

리눅스와 달리 윈도우는 소켓과 파일을 별도로 구분하여 사용한다.

윈도우 기반 입출력 함수(송/수신)
![[Pasted image 20231202024506.png]]
소켓 생성에는 리눅스 윈도우에 *차이가 없다.*
데이터 *송수신 방법에는 조금의 차이가 있다* 이유는 리눅스는 소켓과 파일을 동일시 하고 윈도우는 구별하기 때문이다.

send() : 데이터를 송신한다. 
recv() : 데이터를 읽어 들인다.